{% extends 'base.html' %}

{% load crispy_forms_tags %}

{% block content %}
  <div class="progress mb-3">
    <div class="progress-bar" role="progressbar" aria-valuenow="{{ progress }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ progress }}%"></div>
  </div>
    <h2>  </h2>

   <div class="alert alert-info" role="alert">
     <h4 class="alert-heading">Title de TP</h4>
      <strong> {{ quiz.name }}  </strong>
   </div>








   <h2>Description</h2>
  <p class="lead">{{ question.description }}</p>

        <div class="alert alert-warning" role="alert">
          <strong><p class="lead">  Cliquez    <a href="{%  url 'students:pdf_view' question.id %}" target="_blank"> ici  </a> pour voir le compt-rendu </p></strong>
        </div>
 {% if 1 == 1 %}

    <div class = 'hemidi_centre' >
      <svg   height="600" width="1200"  id="mute-audio" xmlns="http://www.w3.org/2000/svg"  >


                <!-- boobine -->
                <path d="M 100 400 q  40 10 0  20" stroke="blue"
                  stroke-width="5" fill="none" />
                <path d="M 100 420 q  40 10 0  20" stroke="blue"
                  stroke-width="5" fill="none" />
                <path d="M 100 440 q  40 10 0  20" stroke="blue"
                  stroke-width="5" fill="none" />
                <path d="M 100 460 q  40 10 0  20" stroke="blue"
                  stroke-width="5" fill="none" />
                <path d="M 100 480 q  40 10 0  20" stroke="blue"
                  stroke-width="5" fill="none" />
                <path d="M 100 500 q  40 10 0  20" stroke="blue"
                      stroke-width="5" fill="none" />
                <line x1="20" y1="400" x2="100" y2="400"style="stroke:blue;stroke-width:5" />
                <line x1="20" y1="520" x2="100" y2="520"style="stroke:blue;stroke-width:5" />
                <line x1="130" y1="530" x2="130" y2="390"style="stroke:blue;stroke-width:2" />
                <line x1="135" y1="540" x2="135" y2="380"style="stroke:blue;stroke-width:2" />
                <line x1="140" y1="530" x2="140" y2="390"style="stroke:blue;stroke-width:2" />
                <path d="M 170 400 q  -40 10 0  20" stroke="blue"
                  stroke-width="5" fill="none" />
                <path d="M 170 420 q  -40 10 0  20" stroke="blue"
                  stroke-width="5" fill="none" />
                <path d="M 170 440 q  -40 10 0  20" stroke="blue"
                  stroke-width="5" fill="none" />
                <path d="M 170 460 q  -40 10 0  20" stroke="blue"
                  stroke-width="5" fill="none" />
                <path d="M 170 480 q  -40 10 0  20" stroke="blue"
                  stroke-width="5" fill="none" />
              <path d="M 170 500 q  -40 10 0  20" stroke="blue"
                      stroke-width="5" fill="none" />
                <line x1="170" y1="400" x2="200" y2="400"style="stroke:blue;stroke-width:5" />
                <line x1="170" y1="460" x2="200" y2="460"style="stroke:blue;stroke-width:5" />
                <line x1="170" y1="520" x2="200" y2="520"style="stroke:blue;stroke-width:5" />

          <!--- line circuite  -->
                <!-- line milieu bobine-->
                <line x1="200" y1="460" x2="230" y2="460"style="stroke:green;stroke-width:5" />
                <line x1="230" y1="460" x2="230" y2="580"style="stroke:green;stroke-width:5" />
                <!-- line base connect avec GRN-->
               <line x1="170" y1="580" x2=700 y2="580"style="stroke:green;stroke-width:5" />
                <!-- GRN-->
                <line x1="170" y1="560" x2="170" y2="600"style="stroke:green;stroke-width:5" />
                <line x1="160" y1="570" x2="160" y2="590"style="stroke:green;stroke-width:5" />
                <line x1="150" y1="575" x2="150" y2="585"style="stroke:green;stroke-width:5" />
                <!-- line C3 base-->
                <line x1="700" y1="580" x2=700 y2="460"style="stroke:green;stroke-width:5" />
                <!--- C3 -->
                <line id = 'ln4'  x1="685" y1="450" x2="715" y2="450" style="stroke:rgb(0,0,255);stroke-width:5" />
                <line id = 'ln5' x1="685" y1="460" x2="715" y2="460" style="stroke:rgb(0,0,255);stroke-width:5" />
                <!-- line C3 heut-->
                <line x1="700" y1="450" x2=700 y2="100"style="stroke:green;stroke-width:5" />
                 <!-- line C2 base-->
                <line x1="615" y1="580" x2=615 y2="460"style="stroke:green;stroke-width:5" />
                <!--- C2 -->
                <line id = 'ln4'  x1="600" y1="450" x2="630" y2="450" style="stroke:rgb(0,0,255);stroke-width:5" />
                <line id = 'ln5' x1="600" y1="460" x2="630" y2="460" style="stroke:rgb(0,0,255);stroke-width:5" />
                <!-- line C2 heut-->
                <line x1="615" y1="450" x2="615" y2="200"style="stroke:green;stroke-width:5" />
                <!-- line C1 base-->
                <line x1="540" y1="580" x2=540 y2="460"style="stroke:green;stroke-width:5" />
                <!--- C1 -->
                <line id = 'ln4'  x1="525" y1="450" x2="555" y2="450" style="stroke:rgb(0,0,255);stroke-width:5" />
                <line id = 'ln5' x1="525" y1="460" x2="555" y2="460" style="stroke:rgb(0,0,255);stroke-width:5" />
                <!-- line C1 heut-->
                <line x1="540" y1="450" x2="540" y2="300"style="stroke:green;stroke-width:5" />

                <!-- resestance -->

                    <!-- line resastense heut -->
                    <line x1="430" y1="430" x2=430 y2="100"style="stroke:green;stroke-width:5" />
                    <!-- line resastense base -->
                    <line x1="430" y1="580" x2=430 y2="480"style="stroke:green;stroke-width:5" />

                <!-- resestance  rect-->
                <rect x = "418" y = "430"  width="20" height="60" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" onclick="agm_ca()" />


                <!-- swith 2 -->
                <line id = 'ln6' x1="200" y1="400" x2="250" y2="400" style="stroke:green;stroke-width:5"   />
                <line id = 'ln7'  x1="280" y1="400" x2="430" y2="400" style="stroke:green;stroke-width:5"  />
                <circle cx="250" cy="400" r="3" stroke="black" stroke-width="3" fill="red"    onclick = "myfnc_switch()" />
                <circle cx="280" cy="400" r="3" stroke="black" stroke-width="3" fill="red"    onclick = "myfnc_switch()"  />
                <line id = 'switch_2' x1="250" y1="400" x2="276" y2="375" style="stroke:rgb(0,0,255);stroke-width:5"  onclick = "myfnc_switch('switch_2')"  />
                <circle id = 'switch_2_p'  cx="280" cy="373" r="3" stroke="black" stroke-width="3" fill="red"    onclick = "myfnc_switch('switch_2')" />

                <!-- diod2 -->
                     <path  id = 'diod2' d="M 350,400 320,415 320,385 z"  style="stroke:blue;stroke-width:2 "   />
                     <line id = 'ln6' x1="350" y1="415" x2="350" y2="385" style="stroke:blue;stroke-width:5"   />
                 <!-- swith 3 -->
                <line id = 'ln6' x1="200" y1="520" x2="250" y2="520" style="stroke:green;stroke-width:5"  />
                <line id = 'ln7'  x1="280" y1="520" x2="400" y2="520" style="stroke:green;stroke-width:5"  />
                <line id = 'ln7'  x1="400" y1="520" x2="400" y2="400" style="stroke:green;stroke-width:5"  />
                <circle cx="250" cy="520" r="3" stroke="black" stroke-width="3" fill="red"    />
                <circle cx="280" cy="520" r="3" stroke="black" stroke-width="3" fill="red"    onclick = "myfnc_switch('switch_3')"  />
                <line id = 'switch_3' x1="250" y1="520" x2="276" y2="495" style="stroke:rgb(0,0,255);stroke-width:5"  onclick = "myfnc_switch('switch_3')"  />
                <circle id = 'switch_3_p' cx="280" cy="493" r="3" stroke="black" stroke-width="3" fill="red"    onclick = "myfnc_switch('switch_3')" />

                <!-- diod1 -->
                     <path  id = 'diod2' d="M 350,520 320,535 320,505 z"  style="stroke:blue;stroke-width:2 "   />
                     <line id = 'ln6' x1="350" y1="535" x2="350" y2="505" style="stroke:blue;stroke-width:5"   />



                <!-- line vers swith1 -->
                <line id = 'ln6' x1="210" y1="520" x2="210" y2="100" style="stroke:green;stroke-width:5"   />
                <line id = 'ln6' x1="210" y1="100" x2="300" y2="100" style="stroke:green;stroke-width:5"   />

                <!-- line2 vers swith1 -->
                <line id = 'ln6' x1="180" y1="400" x2="180" y2="80" style="stroke:green;stroke-width:5"   />
                <line id = 'ln6' x1="180" y1="80" x2="300" y2="80" style="stroke:green;stroke-width:5"   />



                <!-- switch 1   -->
                    <!-- circle -->
                    <circle  cx="330" cy="90" r="3" stroke="black" stroke-width="3" fill="red"     />
                    <circle  cx="300" cy="80" r="3" stroke="black" stroke-width="3" fill="red"     />
                    <circle  cx="300" cy="100" r="3" stroke="black" stroke-width="3" fill="red"     />
                    <!-- line command -->
                    <line id = 'switch_1' x1="330" y1="90" x2="300" y2="100" style="stroke:blue;stroke-width:5"  onclick = "myfnc_switch('switch_1')" />
                    <!-- command y2 ==> 80 or 100  id == switch_1 -->


                <!--switch 4 -->
                <line x1="430" y1="300" x2="460" y2="300" style="stroke:green;stroke-width:5"  />
                <line  x1="490" y1="300" x2="540" y2="300" style="stroke:green;stroke-width:5"  />
                <circle cx="460" cy="300" r="3" stroke="black" stroke-width="3" fill="red"    />
                <circle cx="490" cy="300" r="3" stroke="black" stroke-width="3" fill="red"    onclick = "myfnc_switch('switch_4')"  />
                <line id = 'switch_4' x1="460" y1="300" x2="486" y2="275" style="stroke:rgb(0,0,255);stroke-width:5"  onclick = "myfnc_switch('switch_4')"  />
                <circle id = 'switch_4_p'  cx="486" cy="273" r="3" stroke="black" stroke-width="3" fill="red"    onclick = "myfnc_switch('switch_4')" />



                <!--switch 5 -->
                <line x1="430" y1="200" x2="500" y2="200" style="stroke:green;stroke-width:5"  />
                <line  x1="530" y1="200" x2="615" y2="200" style="stroke:green;stroke-width:5"  />
                <circle cx="500" cy="200" r="3" stroke="black" stroke-width="3" fill="red"     />
                <circle cx="530" cy="200" r="3" stroke="black" stroke-width="3" fill="red"    onclick = "myfnc_switch('switch_5')"  />
                <line id = 'switch_5' x1="500" y1="200" x2="526" y2="175" style="stroke:rgb(0,0,255);stroke-width:5"  onclick = "myfnc_switch('switch_5')"  />
                <circle id = 'switch_5_p'  cx="530" cy="173" r="3" stroke="black" stroke-width="3" fill="red"    onclick = "myfnc_switch('switch_5')" />

                <!--switch 6 -->
                <line x1="490" y1="100" x2="600" y2="100" style="stroke:green;stroke-width:5"   />
                <line  x1="630" y1="100" x2="700" y2="100" style="stroke:green;stroke-width:5" />
                <circle cx="600" cy="100" r="3" stroke="black" stroke-width="3" fill="red"    onclick = "myfnc_switch('switch_6')" />
                <circle cx="630" cy="100" r="3" stroke="black" stroke-width="3" fill="red"    onclick = "myfnc_switch('switch_6')"  />
                <line id = 'switch_6' x1="600" y1="100" x2="626" y2="75" style="stroke:rgb(0,0,255);stroke-width:5"  onclick = "myfnc_switch('switch_6')"  />
                <circle id = 'switch_6_p'  cx="626" cy="73" r="3" stroke="black" stroke-width="3" fill="red"    onclick = "myfnc_switch('switch_6')" />


                <!-- osilo -->
               <rect x = "360" y = "20"  width="60" height="40" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" onclick="agm_ca()" />

                 <!-- line switch1 vers osilo -->
                <line id = 'ln6' x1="330" y1="90" x2="370" y2="90" style="stroke:green;stroke-width:5"   />
                <line id = 'ln6' x1="370" y1="90" x2="370" y2="40" style="stroke:green;stroke-width:5"   />
                <line id = 'ln6' x1="390" y1="150" x2="390" y2="40" style="stroke:green;stroke-width:5"   />
                <line id = 'ln6' x1="410" y1="100" x2="410" y2="40" style="stroke:green;stroke-width:5"   />
                <line id = 'ln6' x1="410" y1="100" x2="500" y2="100" style="stroke:green;stroke-width:5"   />

                <!-- circle from osilo -->
                <circle   cx="370" cy="40" r="3" stroke="black" stroke-width="3" fill="red"     />
                <circle   cx="390" cy="40" r="3" stroke="black" stroke-width="3" fill="red"    />
                <circle   cx="410" cy="40" r="3" stroke="black" stroke-width="3" fill="red"    />
                 <!-- GND osilo -->
                <line id = 'ln6' x1="370" y1="150" x2="410" y2="150" style="stroke:green;stroke-width:5"   />
                <line id = 'ln6' x1="380" y1="160" x2="400" y2="160" style="stroke:green;stroke-width:5"   />
                <line id = 'ln6' x1="385" y1="170" x2="395" y2="170" style="stroke:green;stroke-width:5"   />

                <!--  text -->
                        <!--  D1 -->
                        <text x="330" y="380"  >D1</text>
                        <!--  D2 -->
                        <text x="330" y="500"  >D2</text>
                        <!--  C1 -->
                        <text x="560" y="450"  >C1</text>
                        <text x="560" y="470"  >1u</text>
                        <!--  C2 -->
                        <text x="635" y="450"  >C2</text>
                        <text x="635" y="470"  >22u</text>
                        <!--  C3 -->
                        <text x="720" y="450"  >C3</text>
                        <text x="720" y="470"  >100u</text>

                        <!--  switch 1  -->
                        <text x="300" y="70"  >SW1</text>
                        <!--  switch 2  -->
                        <text x="240" y=370  >SW2</text>
                        <!--  switch 3  -->
                        <text x="240" y="490"  >SW3</text>
                        <!--  switch 4  -->
                        <text x="460" y="265"  >SW4</text>

                        <!--  switch 5  -->
                        <text x="500" y="165"  >SW5</text>

                        <!--  switch 6  -->
                        <text x="600" y="70"  >SW6</text>

          <!-- les point connecte -->
            <!-- bobine -->








</svg>
         <script>
        function myfnc_switch(switch_id) {
        //document.getElementById(switch_id).setAttribute("style","stroke:red;stroke-width:5");

        if (switch_id == 'switch_1'){
            var switch_status = document.getElementById(switch_id).getAttribute("y2");
            if ( switch_status == 100){
                document.getElementById("switch_1").setAttribute("y2", "80");


            }else{
                 document.getElementById("switch_1").setAttribute("y2", "100");

                }
         }

         if (switch_id == 'switch_2'){
            var switch_status = document.getElementById(switch_id).getAttribute("y2");
            if ( switch_status == 400){
                document.getElementById("switch_2").setAttribute("y2", "375");
                document.getElementById("switch_2_p").setAttribute("cy", "373");

            }else{
                 document.getElementById("switch_2").setAttribute("y2", "400");
                 document.getElementById("switch_2_p").setAttribute("cy", "400");
                }
         }


          if (switch_id == 'switch_3'){
            var switch_status = document.getElementById(switch_id).getAttribute("y2");
            if ( switch_status == 520){
                document.getElementById("switch_3").setAttribute("y2", "495");
                document.getElementById("switch_3_p").setAttribute("cy", "493");

            }else{
                 document.getElementById("switch_3").setAttribute("y2", "520");
                 document.getElementById("switch_3_p").setAttribute("cy", "520");
                }
         }


          if (switch_id == 'switch_4'){
            var switch_status = document.getElementById(switch_id).getAttribute("y2");
            if ( switch_status == 300){
                document.getElementById("switch_4").setAttribute("y2", "275");
                document.getElementById("switch_4_p").setAttribute("cy", "273");

            }else{
                 document.getElementById("switch_4").setAttribute("y2", "300");
                 document.getElementById("switch_4_p").setAttribute("cy", "300");
                }
         }


          if (switch_id == 'switch_5'){
            var switch_status = document.getElementById(switch_id).getAttribute("y2");
            if ( switch_status == 200){
                document.getElementById("switch_5").setAttribute("y2", "175");
                document.getElementById("switch_5_p").setAttribute("cy", "173");

            }else{
                 document.getElementById("switch_5").setAttribute("y2", "200");
                 document.getElementById("switch_5_p").setAttribute("cy", "200");
                }
         }


          if (switch_id == 'switch_6'){
            var switch_status = document.getElementById(switch_id).getAttribute("y2");
            if ( switch_status == 100){
                document.getElementById("switch_6").setAttribute("y2", "75");
                document.getElementById("switch_6_p").setAttribute("cy", "73");

            }else{
                 document.getElementById("switch_6").setAttribute("y2", "100");
                 document.getElementById("switch_6_p").setAttribute("cy", "100");
                }
         }



        if (switch_id == 'validation'){

        if (document.getElementById('switch_1').getAttribute("y2") == 80 ) {
        var switch_1 = 1 ;
        }else{
        var switch_1 = 0 ;
        }
        if (document.getElementById('switch_2').getAttribute("y2") == 400 ) {
        var switch_2 = 1 ;
        }else{
        var switch_2 = 0 ;
        }

         if (document.getElementById('switch_3').getAttribute("y2") == 520 ) {
        var switch_3 = 1 ;
        }else{
        var switch_3 = 0 ;
        }
         if (document.getElementById('switch_4').getAttribute("y2") == 300 ) {
        var switch_4 = 1 ;
        }else{
        var switch_4 = 0 ;
        }

        if (document.getElementById('switch_5').getAttribute("y2") == 200 ) {
        var switch_5 = 1 ;
        }else{
        var switch_5 = 0 ;
        }

        if (document.getElementById('switch_6').getAttribute("y2") == 100 ) {
        var switch_6 = 1 ;
        }else{
        var switch_6 = 0 ;
        }

        var R = switch_1.toString().concat(switch_2.toString() , switch_3.toString(), switch_4.toString() , switch_5.toString(), switch_6.toString()) ;

        window.open(
                      "{% url 'students:get_vr' 12  1234 %}".replace(/1234/, R.toString()),
                      '_blank' // <- This is what makes it open in a new window.
                    );


        }









        }

          </script>

    </div>
<!-- <button id = 'button_mesure2' type="button"  onclick="myfnc_switch('validation')" >validation</button>        -->
 <div class="text-center mb-5">
<button type="button" class="btn btn-primary btn-lg"  onclick="myfnc_switch('validation')"  >validation</button>
 </div>

{% endif %}
<div class="alert alert-warning" role="alert">
 <h4 class="alert-heading">rappeler !</h4>

Après avoir terminé le travail,<strong> déposé la compte-rendu </strong>. Appuyez ensuite sur confirmer , À évaluer par l'enseignant. </br> Lorsque vous avez terminé ce processus, vous ne pouvez pas revenir à cette page. Vous devez vous assurer que le travail est bien fait  
 </div>

    <!-- ta3i hada -->
<input type="hidden" id="myVar" name="variable" value="100000">

        <!------ difine type de circuite  ------->
<script>
    function pp(){
    var tmp = he() ;

    }
</script>

        <!--- validation if treu active button else disabled -->
     {% load static %}


<script type="text/javascript" src="{% static 'js/pi_setting.js' %}"></script>




<script>

        // cett function call fonction setting et paseer argement
            function he(){
             var type_cr = document.getElementById("type_cr").textContent; // difine type circuite
             if (type_cr === 'RC') {
                var R = document.getElementById("resistance").textContent;
                var C = document.getElementById("capa").textContent;

                var r = confirm("confirm valeur :\n" + 'R =:' + R + '\nC =' + C);

                if (r == true) {
                   //RC_val(R,C)
                   //h()




                   document.getElementById("button_mesure").disabled = false;
                   //window.location = "{% url 'students:get_vr' 12  1234 %}".replace(/1234/, R.toString());
                   window.open(
                      "{% url 'students:get_vr' 12  1234 %}".replace(/1234/, R.toString()),
                      '_blank' // <- This is what makes it open in a new window.
                    );
                   return R
                } else {
                  return false;
                }

                //RC()
             }
            }

</script>




  <form method="post" novalidate enctype="multipart/form-data">
    {% csrf_token %}
    {{ form|crispy }}
    <button type="submit" class="btn btn-primary">confirmer</button>
  </form>
{% endblock %}


